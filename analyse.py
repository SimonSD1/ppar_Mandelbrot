import matplotlib.pyplot as plt
import numpy as np

cores = np.array([1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6,
          7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 20, 20, 20, 20, 20, 
          30, 30, 30, 30, 30, 40, 40, 40, 40, 40, 50, 50, 50, 50, 50, 60, 60, 60, 60, 60, 70, 70, 
          70, 70, 70, 80, 80, 80, 80, 80, 90, 90, 90, 90, 90, 100, 100, 100, 100, 100, 110, 110, 
          110, 110, 110, 120, 120, 120, 120, 120, 130, 130, 130, 130, 130, 140, 140, 140, 140, 140, 
          150, 150, 150, 150, 150])
temps = np.array([  62.7248, 62.8651, 62.6741, 62.8584, 62.9454, 
        35.0862, 34.9855, 35.0841, 35.3987, 35.0565, 
        30.1334, 30.1295, 30.2157, 30.3075, 29.8874, 
        23.9415, 23.8406, 23.9353, 23.8592, 23.8428, 
        20.2894, 20.1569, 20.1155, 20.2182, 20.2849, 
        16.965, 17.2104, 17.1763, 17.1813, 17.1536, 
        15.8637, 15.9499, 15.9427, 15.877, 15.9068, 
        13.6829, 13.704, 13.7297, 13.7897, 13.785, 
        12.8006, 12.8076, 12.798, 12.7939, 12.7969, 
        11.3792, 11.3696, 11.3624, 11.1298, 11.3741, 
        6.14854, 6.18234, 6.14175, 6.17731, 6.17213, 
        4.3473, 4.38501, 4.3501, 4.35702, 4.34251, 
        3.35486, 3.39926, 3.36414, 3.38764, 3.35678, 
        3.01826, 2.82561, 2.8488, 2.86303, 2.80121, 
        2.45619, 2.4883, 2.43512, 2.43234, 2.4416, 
        3.213, 3.19125, 3.20469, 3.21763, 3.18089, 
        1.95306, 1.95296, 1.97962, 1.94635, 1.97154, 
        3.11182, 2.71286, 3.09222, 3.01806, 3.317, 
        2.13968, 2.00427, 2.30016, 1.84567, 2.77552, 
        2.79418, 2.71592, 2.47431, 2.48507, 2.4511, 
        2.03442, 1.64386, 1.69153, 1.65548, 1.64393, 
        2.31577, 2.36925, 2.73026, 2.64456, 2.36226, 
        1.89194, 2.17347, 2.74671, 1.93152, 1.9577, 
        1.4304, 1.46016, 1.93757, 1.6998, 2.10724
                      ])


temps_bash = np.array([81.017689568, 71.266766996, 65.471842838, 85.792002660, 90.570614533,
                  48.909417998, 58.095416245, 48.064698360, 47.752925455, 52.517897956,
                  47.632095642, 48.194568019, 37.760667922, 47.889761602, 52.742863716,
                  31.051079588, 26.665648275, 42.209957809, 61.508637719, 46.435804314,
                  48.040643058, 47.691353226, 42.889147725, 62.849405631, 43.049983821,
                  34.904582181, 29.720184627, 24.482766872, 39.833027647, 19.452801242,
                  28.241338600, 28.555162163, 38.528312337, 18.140795933, 38.869621997,
                  17.204906631, 21.089918262, 36.712586593, 36.434984456, 31.413494630,
                  30.324976983, 40.760690682, 45.566840080, 20.417311255, 20.591380732,
                  28.955170938, 28.794504817, 33.921075010, 19.833444520, 38.748096066,
                  33.756822875, 18.547788721, 18.912442732, 18.937506750, 23.735514034,
                  9.286706931, 9.854551809, 13.887232961, 19.053626444, 18.690495891,
                  18.027602747, 17.694823433, 7.683070481, 12.802558090, 18.064113411,
                  17.711851007, 22.288569299, 13.198621766, 17.278994970, 32.672677778,
                  22.224479901, 21.865987979, 11.945748573, 32.052938828, 37.030756431,
                  28.508018100, 28.027200114, 22.565720377, 17.761958095, 27.816788543,
                  32.150066724, 26.881227946, 16.756797118, 27.143848608, 6.901250840,
                  22.647078762, 12.351033971, 17.747092714, 18.358361175, 22.650145540,
                  17.772608022, 6.545759334, 6.938966760, 11.341556589, 27.197946487,
                  17.591524133, 42.376003754, 22.150508180, 12.131582202, 12.479873008,
                  17.913038969, 22.088066993, 16.913971130, 21.653012865, 12.476102992,
                  6.766326496, 17.796617315, 16.460420997, 1.102071942, 6.332843333,
                  6.281208009, 1.291129643, 32.029059000, 13.209930939, 7.080518797,
                  32.255536603, 26.802886922, 12.129461887, 21.582827087, 11.634882985])

unique_cores = np.unique(cores)  
mean_times = np.array([np.mean(temps[cores == n]) for n in unique_cores])  

T1 = mean_times[0]  
speedup = T1 / mean_times  

plt.figure(figsize=(10, 10))

plt.subplot(2, 1, 1)
plt.plot(unique_cores, mean_times, marker='o', linestyle='-', color='b', label="Moyenne du temps de calcul")
plt.xlabel('Nombre de core (n)')
plt.ylabel('Moyenne du temps de calcul c (secondes)')
plt.title('Moyenne du temps de calcul c vs nombre de core')
plt.grid(True)
plt.legend()

plt.subplot(2, 1, 2)
plt.plot(unique_cores, speedup, marker='s', linestyle='--', color='r', label="Speedup")
plt.xlabel('Nombre de core (n)')
plt.ylabel('Accélération (T1 / Tn)')
plt.title('Accélération vs nombre de core utilisés')
plt.grid(True)
plt.legend()

plt.tight_layout()

plt.savefig("plot_c.png")

mean_times_bash = np.array([np.mean(temps_bash[cores == n]) for n in unique_cores])  

T1 = mean_times_bash[0]  
speedup = T1 / mean_times_bash 

plt.figure(figsize=(10, 10))

plt.subplot(2, 1, 1)
plt.plot(unique_cores, mean_times, marker='o', linestyle='-', color='b', label="Moyenne du temps de calcul")
plt.xlabel('Nombre de core (n)')
plt.ylabel('Moyenne du temps de calcul bash (secondes)')
plt.title('Moyenne du temps de calcul bash vs nombre de core')
plt.grid(True)
plt.legend()

plt.subplot(2, 1, 2)
plt.plot(unique_cores, speedup, marker='s', linestyle='--', color='r', label="Speedup")
plt.xlabel('Nombre de core (n)')
plt.ylabel('Accélération (T1 / Tn)')
plt.title('Accélération vs nombre de core utilisés')
plt.grid(True)
plt.legend()

plt.tight_layout()

plt.savefig("plot_bash.png")


